"use strict";Stripe.setPublishableKey("pk_test_YMrN0d2HfY11V7uDsQoUXnqu"),angular.module("livesportsApp",["ngAnimate","ngCookies","ui.router","ngSanitize","ngTouch","firebase","firebase.auth","ui.bootstrap","toastr","vcRecaptcha","angularMoment","angularPayments"]),angular.module("livesportsApp").config(["toastrConfig",function(a){angular.extend(a,{allowHtml:!1,closeButton:!0,closeHtml:"<button>&times;</button>",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",onHidden:null,onShown:null,onTap:null,progressBar:!0,tapToDismiss:!0,templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}]),angular.module("livesportsApp").run(["$rootScope","$anchorScroll",function(a,b){a.$on("$stateChangeSuccess",function(a,c,d,e,f){b()})}]),angular.module("livesportsApp").config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("main",{"abstract":!0,templateUrl:"views/main.html",controller:"MainCtrl as main"}).state("main.home",{url:"/",templateUrl:"views/home.html",controller:"HomeCtrl as home",resolve:{currentAuth:["AuthenticateService",function(a){return a.fnWaitForSignIn(!1)}]}}).state("main.signUp",{url:"/sign-up",templateUrl:"views/signUp.html",controller:"SignUpCtrl as signUp",resolve:{currentAuth:["AuthenticateService",function(a){return a.fnWaitForSignIn(!0)}]}}).state("main.watch",{url:"/watch/:id",templateUrl:"views/watch.html",controller:"WatchCtrl as watch",resolve:{currentAuth:["AuthenticateService",function(a){return a.fnWaitForSignIn(!1)}]}}).state("main.news",{url:"/news/:id",templateUrl:"views/news.html",controller:"NewsCtrl as newsr",resolve:{currentAuth:["AuthenticateService",function(a){return a.fnWaitForSignIn(!1)}]}}).state("main.profile",{url:"/profile",templateUrl:"views/auth/profile.html",controller:"ProfileCtrl as profile",resolve:{currentAuth:["AuthenticateService",function(a){return a.fnRequireSignIn()}]}}).state("main.changePassword",{url:"/change-password",templateUrl:"views/auth/changePassword.html",controller:"ChangePasswordCtrl as changePassword",resolve:{currentAuth:["AuthenticateService",function(a){return a.fnRequireSignIn()}]}}).state("main.subscriptionPack",{url:"/subscription-package",templateUrl:"views/subscriptionPackage.html",controller:"subscriptionPackageCtrl as subpack",resolve:{currentAuth:["AuthenticateService",function(a){return a.fnRequireSignIn()}]}}).state("main.payment",{url:"/payment",templateUrl:"views/payment.html",controller:"paymentCtrl",resolve:{currentAuth:["AuthenticateService",function(a){return a.fnRequireSignIn()}]}}),b.otherwise("/")}]),angular.module("livesportsApp").filter("time",function(){return function(a){var b=[Math.floor(Math.floor(a/60)/60)%60,Math.floor(a/60)%60,a%60];return b.map(function(a){return(10>a?"0":"")+a}).join(":")}}),angular.module("livesportsApp").directive("ngShowAuth",["auth","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){b(function(){d.toggleClass("ng-cloak",!a.$getAuth())},0)}d.addClass("ng-cloak"),a.$onAuthStateChanged(e),e()}}}]),angular.module("livesportsApp").directive("ngHideAuth",["auth","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){b(function(){d.toggleClass("ng-cloak",!!a.$getAuth())},0)}d.addClass("ng-cloak"),a.$onAuthStateChanged(e),e()}}}]),angular.module("livesportsApp").directive("ngPasswordVerify",function(){return{require:"ngModel",scope:{ngPasswordVerify:"="},link:function(a,b,c,d){a.$watch(function(){var b;return(a.ngPasswordVerify||d.$viewValue)&&(b=a.ngPasswordVerify+"_"+d.$viewValue),b},function(b){b&&d.$parsers.unshift(function(b){var c=a.ngPasswordVerify;return c!==b?void d.$setValidity("ngPasswordVerify",!1):(d.$setValidity("ngPasswordVerify",!0),b)})})}}}),angular.module("firebase.auth",[]).constant("SIMPLE_LOGIN_PROVIDERS",["password","anonymous"]).constant("loginRedirectPath","/login").factory("auth",["$firebaseAuth",function(a){return a()}]),angular.module("livesportsApp").factory("AuthenticateService",["$q","$state","$location","auth",function(a,b,c,d){return this.fnRequireSignIn=function(){var e=a.defer();return d.$requireSignIn().then(function(a){e.resolve(a)},function(a){"AUTH_REQUIRED"===a&&(b.current.name?b.go(b.current.name):c.url("/")),e.resolve(a)}),e.promise},this.fnWaitForSignIn=function(e){var f=a.defer();return d.$waitForSignIn().then(function(a){a&&e&&(b.current.name&&"/"!==c.path()?b.go(b.current.name):c.url("/")),f.resolve(a)}),f.promise},this}]),angular.module("livesportsApp").factory("AuthService",["$q","$state","auth","toastr",function(a,b,c,d){return this.fnSignIn=function(b){var e=a.defer();return c.$signInWithEmailAndPassword(b.email,b.password).then(function(a){e.resolve(a)})["catch"](function(a){d.error(a.message)}),e.promise},this.fnSignOut=function(){var b=a.defer();return b.resolve(c.$signOut()),b.promise},this.fnSignUp=function(b){var e=a.defer();return c.$createUserWithEmailAndPassword(b.email,b.password).then(function(a){e.resolve(a)})["catch"](function(a){d.error(a.message)}),e.promise},this.fnUpdatePassword=function(e){var f=a.defer();return c.$updatePassword(e).then(function(){d.success("Password changed successfully."),b.go("main.home")})["catch"](function(a){d.error(a.message)}),f.promise},this.fnSendPasswordResetEmail=function(b){var e=a.defer();return c.$sendPasswordResetEmail(b).then(function(){d.success("Password reset email sent successfully."),e.resolve()})["catch"](function(a){d.error(a.message)}),e.promise},this}]),angular.module("livesportsApp").factory("AuthUserService",["$q","toastr",function(a,b){return this.fnGet=function(){return firebase.auth().currentUser},this.fnUpdateUser=function(c){var d=a.defer();return firebase.auth().currentUser.updateProfile(c).then(function(){d.resolve(c)})["catch"](function(a){b.error(a.message)}),d.promise},this}]),angular.module("livesportsApp").factory("ProfileService",["$q","$firebaseArray",function(a,b){var c=rootRef.child("user_profile"),d=b(c);return this.fnCreateProfile=function(b){var c=a.defer();return d.$add(b).then(function(a){c.resolve(a)})["catch"](function(a){c.reject(a)}),c.promise},this.fnUpdateProfile=function(b){var c=a.defer();return d.$save(b).then(function(a){c.resolve(a)})["catch"](function(a){c.reject(a)}),c.promise},this.fnGetProfiles=function(){var b=a.defer();return d.$loaded().then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)}),b.promise},this.fnGetProfile=function(b){var d=a.defer();return c.orderByChild("userId").equalTo(b).once("value",function(a){if(a.exists()){var b=Object.keys(a.val())[0],c=a.val()[b];c.$id=b,c.$priority=null,d.resolve(c)}else d.reject("Not found.")}),d.promise},this}]),angular.module("livesportsApp").factory("VideosService",["$q",function(a){var b=[{id:"1",date:"1453154400000",title:"Fiji vs Levante Match-Fiji FA Media",subtitle:"Fiji U23 Spain tour-Full Match Day 1",text:"Fiji U23 Spain tour-Full Match Day 1",duration:4457,thumb:"https://i.ytimg.com/vi/NnP01KE92-k/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=fRukL8HCt6PRhEXhst4fQolFClE",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"},{id:"2",date:"1469653200000",title:"Inkk BOG Draw",subtitle:"Defending champions and host Rewa has been drawn in Pool A with 2016 Vodafone FACT winners Nadi, finalist Suva and unpredictable Dreketi. Ba lead Pool B with Labasa, Lautoka and Nadroga.",text:"Defending champions and host Rewa has been drawn in Pool A with 2016 Vodafone FACT winners Nadi, finalist Suva and unpredictable Dreketi. Ba lead Pool B with Labasa, Lautoka and Nadroga.",duration:"261",thumb:"https://i.ytimg.com/vi/gfUc6jd_H9Y/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=_J7UFePOty7a_N8Rc0w-kutDB1o",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"},{id:"3",date:"1469653200000",title:"Inkk BOG Draw",subtitle:"The 2016 INKK Mobile Battle of the Giants pool drawn today.",text:"The 2016 INKK Mobile Battle of the Giants pool drawn today.",duration:"88",thumb:"https://i.ytimg.com/vi/LekKuv7nBd4/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=UlcYuv8uE3_sYpq1M-yEpExWO4M",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"},{id:"4",date:"1469480400000",title:"Fiji FA president Rajesh Patel",subtitle:"Fiji FA president Rajesh Patel address during the inauguration of FIFA's Income Generating Project (WIN WIN) for Fiji FA at Headquarters in Vatuwaqa.",text:"Fiji FA president Rajesh Patel address during the inauguration of FIFA's Income Generating Project (WIN WIN) for Fiji FA at Headquarters in Vatuwaqa.",duration:"334",thumb:"https://i.ytimg.com/vi/L8t4TfHzyd0/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=ZL0g4NAwZdLookVXfK7dcgtSIqE",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"},{id:"5",date:"1469480400000",title:"Bob Kumar interview",subtitle:"Fiji FA chief executive officer Bob Kumar interview after the inauguration of Fiji FA's FIFA Income Generating Project (WIN WIN) at Fiji FA Headquarters in Vatuwaqa.",text:"Fiji FA chief executive officer Bob Kumar interview after the inauguration of Fiji FA's FIFA Income Generating Project (WIN WIN) at Fiji FA Headquarters in Vatuwaqa.",duration:"247",thumb:"https://i.ytimg.com/vi/kb2e-zL0v2Q/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=my2Ip_GLzoo0XodwYLtDQftoVGU",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"},{id:"6",date:"1469480400000",title:"David Chung interview",subtitle:"FIFA vice president and OFC president David Chung interview after the inauguration of Fiji FA's FIFA Income Generating Project (WIN WIN) at Fiji FA Headquarters in Vatuwaqa.",text:"FIFA vice president and OFC president David Chung interview after the inauguration of Fiji FA's FIFA Income Generating Project (WIN WIN) at Fiji FA Headquarters in Vatuwaqa.",duration:"115",thumb:"https://i.ytimg.com/vi/xIRu1uXBtvc/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=vGtWGHwaxUmFUABOOZ_e4-kZN-E",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"},{id:"7",date:"1466456400000",title:"Vodafone Fiji FACT 2016-Rajesh Patel interview ",subtitle:"Fiji FA president Rajesh Patel announces 2017 BOG in Labasa.",text:"Fiji FA president Rajesh Patel announces 2017 BOG in Labasa.",duration:"109",thumb:"https://i.ytimg.com/vi/Hc5TXt4gmdE/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=mfUE3opbXUnjcdQ9azx8rluIJMM",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"}];return this.fnList=function(){var c=a.defer();return c.resolve(b),c.promise},this.fnGetVideo=function(c){var d=a.defer(),e=b.map(function(a){return a.id}).indexOf(c);return e>-1?d.resolve(b[e]):d.resolve({}),d.promise},this}]),angular.module("livesportsApp").factory("NewsService",["$q",function(a){var b=[{id:"1",date:"1470884661572",title:"Germany 10-0 Fiji",subtitle:"Germany dispatched Fiji 10-0 at the Estadio Mineirao in Belo Horizonte to see them through to the last eight in second place in Group C.",text:"The Germans knew their job ahead of the game, sitting - at that time - third in the group needing a big win to stand the best possible chance of progressing to the knockout stages. They did just that, racing into a six-goal lead by the interval and adding four more in the second half, with Nils Petersen and Max Meyer helping themselves to five and three goals apiece. Serge Gnabry took his tally to five for the tournament with a first-half brace, and it was the Arsenal man who opened the scoring inside the opening ten minutes. Julian Brandt, at the centre of everything for Germany, was set free down the right, and his squared ball was knocked in by the No17. Petersen then got his first of the game, and Rio 2016, moments later, following up on a Max Meyer shot that was spilled by Fijian goalkeeper Simione Tamanisau. Meyer himself got on the scoresheet on the half-hour mark, before Petersen headed in his second. The Freiburg man completed his hat-trick five minutes before the break, finishing a superb pass by the irrepressible Brandt. Gnabry's second of the day moments before the interval was his second free-kick of the tournament, one that found its way directly into the net, rather than via a deflection as against Korea Republic last time out. The one-way traffic continued in the second half, with Meyer taking hold of the game and making it his own. The Schalke midfielder scored Germany's seventh, rolling his studs over the ball with his right foot to deceive the Fijian defence before finishing left-footed past Tamanisau. Meyer completed his hat-trick by pouncing after Gnabry had hit the crossbar, and he was given the opportunity to score his fourth from the penalty spot after a Fijian infringement. It was a moment of brief reprieve for Tamanisau as he saved the German skipper's effort. Horst Hrubesch's side did not have to wait long to get their ninth, with Petersen scoring his fourth from the spot minutes later. The No18 then scored his fifth, putting Germany into double figures, heading home after Brandt had been denied by the busy Fijian goalkeeper. The mammoth win sees Germany leapfrog Mexico into second place, and the Nationalmannschaft head to Brasilia to meet Group D champions Portugal in Saturday's quarter-final.",thumb:"http://www.oceaniafootball.com/ofc/Portals/0/Images/Articles/111111.jpg",img:"http://www.oceaniafootball.com/ofc/Portals/0/Images/Articles/111111.jpg"},{id:"2",date:"1470884661572",title:"Fiji 1-5 Mexico",subtitle:"Fiji put in a spirited performance and even had a 1-0 lead at half-time over Mexico, but the gold medal holders proved too strong in the second half",text:"Staging a comeback to record a 5-1 victory in Group C of the Men's Olympics Football Tournament with Erick Gutierrez netting four. Unlike in their opening match against Korea Republic, Fiji showed a desire and intent to play forward and they were rewarded for their tactical shift on 10 minutes. Skipper Roy Krishna opened the scoring for the islanders when he ran onto a long ball from Iosefo Verevou and found the net with a header. Mexico goalkeeper Alfredo Talavera came out of the edge of his penalty area and was unable to stop Krishna's effort from finding the net. The crowd at the Fonte Nova Arena in Salvador were clearly in support of Fiji, who were the underdogs going up against the London 2012 gold medallists. Fiji were able to hold on to their lead going into half-time. However, it was a much different picture in the second half. Mexico needed just three minutes to score the equaliser when Erick Gutierrez tapped in from close range from Marco Bueno's cut-back assist. Gutierrez then went on to score two more quickfire goals. His second came after beautiful interplay from Jose Abella and Oribe Peralta, while the Pachuca man's third was not as aesthetically pleasing. Carlos Cisneros played the ball into the box to Gutierrez, who fell to the ground while striking the ball but his effort still found the back of the net. Mexico then made it 4-1 thanks to Carlos Salcedo after a corner kick. Gutierrez then matched Oghenekaro Etebo's feat of scoring four goals in one match at the tournament, when he finished a beautiful solo run by lifting the ball over Tamanisau to cap off a 5-1 win.",thumb:"http://www.oceaniafootball.com/ofc/Portals/0/Images/Articles/111111.jpg",img:"http://www.oceaniafootball.com/ofc/Portals/0/Images/Articles/111111.jpg"},{id:"3",date:"1470884661572",title:"Impressive Korea Republic sour Fiji's debut",subtitle:"Fiji's Men's Olympic Football Tournament debut ended in disappointment as Ryu Seungwoo's hat-trick helped Korea Republic deliver a powerful second-half performance for an 8-0 win in Salvador.",text:"Fiji turned in a solid first-half showing, and trailed only to Seungwoo's goal, but it all turned sour for the Oceania side as Korea Republic crashed home seven further goals, highlighted by a stunning three-goal salvo within two minutes. Korea Republic had the better of proceedings from the opening whistle, though the well-drilled Fiji defied them relatively comfortably thanks to some strong defending. At the same, time Fiji's athletic goalkeeper Simione Tamanisau made some impressive stops. Korea finally went ahead just past the hour mark as Seungwoo swept home from close range. And the lead could have been doubled soon after as Moon Changjin crashed a penalty against the post. At the other end, Fiji star forward Roy Krishna always looked a dangerous outlet on the counter-attack. And though the London 2012 bronze medallists increased their level of dominance after the interval, no one could have foreseen what was to come. Kwon Changhoon extended the lead with a superb turn and finish, and then added another exactly a minute later with a close-range finish after profiting from a superb Seungwoo square ball. Then, virtually from the kick-off, the impressive Seungwoo scored his second by crashing home with a fierce effort past the exposed Tamanisau. Korea Republic's overage headline star Son Heungmin entered the fray midway through the second half, and he too found himself on the scoresheet within a couple of minutes after converting from the penalty spot. Substitute Suk Hyunjun added a sixth with 13 minutes remaining, and just as Fiji's pain appeared to be complete, the Asian heavyweights added two more late on. Hyunjun collected his second on 90 minutes, before Seungwoo completed his treble with virtually the last kick of the match.",thumb:"http://www.oceaniafootball.com/ofc/Portals/0/Images/Articles/tmp96ED.jpg",img:"http://www.oceaniafootball.com/ofc/Portals/0/Images/Articles/tmp96ED.jpg"},{id:"4",date:"1470884661572",title:"Fiji FA boss confident of successful B.O.G.",subtitle:"Fiji Football Association president Rajesh Patel is confident that this year's INKK Mobile Battle of the Giants tournament will be very successful like the Vodafone Fiji FACT.",text:"Patel said they had a very successful Fiji FACT 2016 in Labasa and this would be their second major tournament that we are embarking on 'I know the teams are preparing well and this will be again hard to predict on who will win the tournament,' he said. Patel said every team is competitive and the 90-minute football that they have brought in is paying dividends. 'This is what we said to the districts you will benefit from it, the nation benefit from it and football at large benefits from it. The group stages will be played at Ratu Cakobau Park while the venues of the semi-finals and final will be decided after the teams are decided for the top four.' He said the reason for the two weekends of competition is to allow fans and the districts to watch and enjoy the game. 'The fans will have the opportunity to watch their teams play in the semi-final and final and also the districts get a relief from the three days of 90-minute football.'\nPatel said this also helps financially and also the fans get the best opportunity to watch the display of skills and constructive football.\nThe INKK Mobile Battle of Giants pool matches will be played from August 26-28 in Nausori.",thumb:"http://www.oceaniafootball.com/ofc/Portals/0/Images/Articles/tmp96A4.jpg",img:"http://www.oceaniafootball.com/ofc/Portals/0/Images/Articles/tmp96A4.jpg"}];return this.fnNewsList=function(){var c=a.defer();return c.resolve(b),c.promise},this.fnGetNews=function(c){var d=a.defer(),e=b.map(function(a){return a.id}).indexOf(c);return e>-1?d.resolve(b[e]):d.resolve({}),d.promise},this}]),angular.module("livesportsApp").factory("StripeService",["$q","$http",function(a,b){return this.fnMakePayment=function(c){var d=a.defer();return b.post("/charge",c).then(function(a){d.resolve(a.data)},function(a){d.reject(a.data)}),d.promise},this.fnCreateStripeCustomer=function(c){var d=a.defer();return b.post("/customer",c).then(function(a){d.resolve(a.data)},function(a){d.reject(a)}),d.promise},this.fnDeleteSubscription=function(c){var d=a.defer();return b["delete"]("/subscriptions/"+c.subscriptionsId).then(function(a){d.resolve(a.data)},function(a){d.reject(a)}),d.promise},this}]),angular.module("livesportsApp").factory("ChargesService",["$q","$firebaseArray",function(a,b){var c=rootRef.child("user_Charges"),d=b(c);return this.fnCreateCharges=function(b){var c=a.defer();return d.$add(b).then(function(a){c.resolve(a)})["catch"](function(a){c.reject(a)}),c.promise},this.fnUpdateCharges=function(b){var c=a.defer();return d.$save(b).then(function(a){c.resolve(a)})["catch"](function(a){c.reject(a)}),c.promise},this.fnDeleteCharges=function(b){var c=a.defer();return d.$remove(b).then(function(a){c.resolve(a)})["catch"](function(a){c.reject(a)}),c.promise},this.fnGetCharges=function(){var b=a.defer();return d.$loaded().then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)}),b.promise},this.fnGetCharge=function(b){var d=a.defer();return c.orderByChild("userId").equalTo(b).once("value",function(a){if(a.exists()){var b=Object.keys(a.val())[0],c=a.val()[b];c.$id=b,c.$priority=null,d.resolve(c)}else d.reject("Not found.")}),d.promise},this}]),angular.module("livesportsApp").controller("SignInCtrl",["$uibModal","$uibModalInstance",function(a,b){var c=this;c.signInObj={},c.fnForgotPasswordModal=function(){c.fnCancel(),a.open({animation:!0,templateUrl:"views/modals/forgotPassword.html",controller:"ForgotPasswordCtrl as forgotPass",size:"md"})},c.fnSignIn=function(a){b.close(a)},c.fnCancel=function(){b.dismiss("cancel")}}]),angular.module("livesportsApp").controller("ForgotPasswordCtrl",["$uibModalInstance","AuthService",function(a,b){var c=this;c.forgotPassObj={},c.fnForgotPassword=function(a){b.fnSendPasswordResetEmail(a.email).then(function(){c.fnCancel()})},c.fnCancel=function(){a.dismiss("cancel")}}]),angular.module("livesportsApp").controller("MainCtrl",["$state","$uibModal","$location","AuthService","AuthUserService",function(a,b,c,d,e){var f=["main.home","main.watch","main.news"],g=this;g.currentAuth={},g.fnSignInModal=function(){var a=b.open({animation:!0,templateUrl:"views/modals/signIn.html",controller:"SignInCtrl as signIn",size:"md"});a.result.then(function(a){g.fnSignIn(a)})},g.fnRedirect=function(){f.indexOf(a.current.name)>-1?a.go(a.current.name):c.url("/")},g.fnSignIn=function(a){d.fnSignIn(a).then(function(a){g.currentAuth=a,g.fnRedirect()})},g.fnSignOut=function(){d.fnSignOut().then(function(){g.fnRedirect()})},g.fnInitMain=function(){g.currentAuth=e.fnGet()}}]),angular.module("livesportsApp").controller("HomeCtrl",["VideosService","NewsService",function(a,b){var c=this;c.fnGetVideos=function(){a.fnList().then(function(a){c.videos=a})},c.fnGetNews=function(){b.fnNewsList().then(function(a){c.news=a})},c.fnInitHomePage=function(){c.fnGetVideos(),c.fnGetNews()}}]),angular.module("livesportsApp").controller("SignUpCtrl",["$scope","$q","$location","$timeout","ProfileService","AuthService","AuthUserService","toastr",function(a,b,c,d,e,f,g,h){function i(a){return j(a.substr(0,a.indexOf("@"))||"")}function j(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}var k=this;k.signUpObj={},k.isLoading=!1,k.fnSignUp=function(a){k.isLoading=!0,f.fnSignUp(a).then(function(a){k.fnUpdateUser(a),k.fnCreateProfile(a)})},k.fnUpdateUser=function(b){g.fnUpdateUser({displayName:i(b.email)}).then(function(){k.isLoading=!1,h.success("User "+b.email+" created successfully."),a.main.currentAuth=g.fnGet(),c.url("/")})},k.fnCreateProfile=function(a){var b={userId:a.uid,email:a.email,first_name:i(a.email)};e.fnCreateProfile(b)}}]),angular.module("livesportsApp").controller("WatchCtrl",["$scope","$state","$stateParams","$timeout","$window","currentAuth","toastr","VideosService","ProfileService","ChargesService","StripeService",function(a,b,c,d,e,f,g,h,i,j,k){var l=this;l.highlightHeight={overflow:"auto"},l.fnGetUserProfile=function(){i.fnGetProfiles().then(function(a){var b=a.map(function(a){return a.userId}).indexOf(f.uid);b>-1&&(l.profileObj=a[b])})},l.watchUserProfile=function(b){i.fnGetProfile(f.uid).then(function(c){if(c.last_watch){var d=moment((new Date).getTime()),e=moment(c.last_watch),f=d.diff(e,"seconds");f>40?(l.profileObj.last_watch=(new Date).getTime(),l.fnUpdateProfile(l.profileObj,b)):(l.manual_pause=!0,b.pause(),a.main.fnSignOut(),g.error("Account is used by another device so we are logging you out.."))}else l.profileObj.last_watch=(new Date).getTime(),l.fnUpdateProfile(l.profileObj,b)},function(a){g.error(a.message)})},l.fnGetCharges=function(){j.fnGetCharges().then(function(a){var b=a.map(function(a){return a.userId}).indexOf(f.uid);b>-1&&(l.chargeObj=a[b])})},l.fnUpdateProfile=function(a){i.fnUpdateProfile(a).then(function(){},function(a){g.error(a.message)})},l.fnPlayVideo=function(c,f){f&&b.go("main.watch",{id:f},{notify:!1}),jwplayer("watch-video").setup({playlist:[{sources:[{file:c.video}],image:c.thumb,title:c.title}],skin:{background:"#000000",inactive:"#ffffff",active:"#ff0000"},captions:{color:"#0000ff"},width:"100%",aspectratio:"16:9",abouttext:c.text,repeat:!1});var g=30,h=30.4;jwplayer("watch-video").onPause(function(){l.manual_pause?l.manual_pause=!1:(l.profileObj.last_watch=null,l.fnUpdateProfile(l.profileObj))}),jwplayer("watch-video").onPlay(function(a){l.profileObj&&l.watchUserProfile(this)}),jwplayer("watch-video").onTime(function(a){if(a.position>g&&a.position<h){var b=(new Date).getTime();l.profileObj.last_watch=b,l.fnUpdateProfile(l.profileObj),g+=30,h+=30}}),jwplayer("watch-video").onComplete(function(a){g=30,h=30.4}),d(function(){function b(){var b=angular.element("#watch-video").height();l.highlightHeight.height=b-35+"px",a.$apply()}angular.element(e).on("resize",function(){b()}),b()},500)},l.fnGetVideos=function(){h.fnList().then(function(a){l.videos=a})},l.fnGetVideo=function(a){h.fnGetVideo(a).then(function(a){l.fnPlayVideo(a)})},l.fnInitWatchPage=function(){f&&(l.fnGetUserProfile(),l.fnGetCharges()),d(function(){l.videoId=c.id,l.fnGetVideo(l.videoId),l.fnGetVideos()})}}]),angular.module("livesportsApp").controller("NewsCtrl",["$scope","$state","$stateParams","$timeout","$window","NewsService",function(a,b,c,d,e,f){var g=this;g.fnGetNews=function(){f.fnNewsList().then(function(a){g.news=a})},g.fnGetSingleNews=function(a){f.fnGetNews(a).then(function(a){g.newsObj=a})},g.fnInitWatchPage=function(){d(function(){g.newsId=c.id,g.fnGetSingleNews(g.newsId),g.fnGetNews()})}}]),angular.module("livesportsApp").controller("subscriptionPackageCtrl",["$scope",function(a){var b=this;b.fnInitWatchPage=function(){}}]),angular.module("livesportsApp").controller("paymentCtrl",["$scope","$state","StripeService","toastr","currentAuth","ChargesService",function(a,b,c,d,e,f){a.isAgree=!1,a.stripeCallback=function(g,h){if(a.processing=!1,a.hideAlerts(),h.error)a.stripeError=h.error.message,d.error("payment failed",a.stripeError);else{a.stripeToken=h.id;var i={stripeToken:h.id,amount:50,description:"test payment"};c.fnMakePayment(i).then(function(a){var c={userId:e.uid,email:e.email,created:a.created,chargeId:a.id,transId:a.balance_transaction};f.fnCreateCharges(c).then(function(a){b.go("main.home"),d.success("Successfully paid.")},function(a){d.error(a)})},function(a){d.error(a.message)})}},a.hideAlerts=function(){a.stripeError=null,a.stripeToken=null}}]),angular.module("livesportsApp").controller("ProfileCtrl",["ProfileService","currentAuth","toastr",function(a,b,c){var d=this;d.profileObj={},d.countriesArr=[{name:"United States",code:"us"}],d.usStatesArr=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"American Samoa",abbreviation:"AS"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Federated States Of Micronesia",abbreviation:"FM"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Guam",abbreviation:"GU"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Palau",abbreviation:"PW"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virgin Islands",abbreviation:"VI"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],d.fnUpdateUser=function(a){firebase.auth().currentUser.updateProfile({displayName:a.first_name+(a.last_name?" "+a.last_name:"")})["catch"](function(a){c.error(a.message)})},d.fnUpdateProfile=function(b){a.fnUpdateProfile(b).then(function(){c.success("Profile updated successfully."),d.fnUpdateUser(b)},function(a){c.error(a.message)})},d.fnGetUserProfile=function(){a.fnGetProfiles().then(function(a){var c=a.map(function(a){return a.userId}).indexOf(b.uid);c>-1&&(d.profileObj=a[c])})},d.fnInitUserProfile=function(){d.fnGetUserProfile()}}]),angular.module("livesportsApp").controller("ChangePasswordCtrl",["AuthService",function(a){var b=this;b.changePasswordObj={},b.fnChangePassword=function(b){a.fnUpdatePassword(b.password)}}]);